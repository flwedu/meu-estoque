model Sale {
    id         String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    clientId   String     @map("client_id") @db.Uuid
    client     Client     @relation(fields: [clientId], references: [id])
    createdAt  DateTime   @default(now()) @map("created_at") @db.Timestamptz
    updatedAt  DateTime   @default(now()) @map("updated_at") @db.Timestamptz
    items      SaleItem[]
    userId     String     @map("user_id") @db.Uuid
    user       User       @relation(fields: [userId], references: [id])
    totalPrice Decimal    @db.Decimal(10, 2)

    @@map("sales")
}

model SaleItem {
    id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    saleId    String   @map("sale_id") @db.Uuid
    sale      Sale     @relation(fields: [saleId], references: [id])
    productId String   @map("product_id") @db.Uuid
    product   Product  @relation(fields: [productId], references: [id])
    quantity  Int
    price     Decimal  @db.Decimal(10, 2)
    createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz
    updatedAt DateTime @default(now()) @map("updated_at") @db.Timestamptz

    @@map("sale_items")
}
